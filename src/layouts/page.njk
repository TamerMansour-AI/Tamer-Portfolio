<!doctype html>
<html lang="{{ lang or 'en' }}" {% if lang == 'ar' %}dir="rtl"{% endif %}>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ title or site.title }}</title>
  <meta name="theme-color" content="#5a6b2c">

  {% set desc = description or site.defaultDescription %}
  <meta name="description" content="{{ desc }}">
  <meta property="og:title" content="{{ title or site.title }}">
  <meta property="og:description" content="{{ desc }}">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ site.url }}{{ page.url }}">
  <link rel="canonical" href="{{ site.url }}{{ page.url }}">

  <link rel="stylesheet" href="{{ '/styles.css' | url }}?v={{ site.assetVersion }}">
</head>
<body>
  <a class="skip-link" href="#main-content">Skip to content</a>

  {# ===== Labels + alt URL (RAW) ===== #}
  {% if lang == 'ar' %}
    {% set base = '/ar' %}
    {% set l_home = 'الرئيسية' %}
    {% set l_projects = 'المشاريع' %}
    {% set l_media = 'الوسائط' %}
    {% set l_gallery = 'المعرض' %}
    {% set l_music = 'الموسيقى' %}
    {% set l_research = 'الأبحاث' %}
    {% set l_training = 'التدريب والاستشارات' %}
    {% set l_blog = 'المدونة' %}
    {% set l_about = 'نبذة' %}
    {% set l_contact = 'تواصل' %}
    {% set l_lang_toggle = 'English' %}
    {% set current = page.url or '/' %}
    {% set altUrlRaw = current
       | replace('/ar/index.html','/')
       | replace('/ar/','/')
       | replace('/ar','/') %}
  {% else %}
    {% set base = '' %}
    {% set l_home = 'Home' %}
    {% set l_projects = 'Projects' %}
    {% set l_media = 'Media' %}
    {% set l_gallery = 'Gallery' %}
    {% set l_music = 'Music' %}
    {% set l_research = 'Research' %}
    {% set l_training = 'Training &amp; Consulting' %}
    {% set l_blog = 'Blog' %}
    {% set l_about = 'About' %}
    {% set l_contact = 'Contact' %}
    {% set l_lang_toggle = 'العربية' %}
    {% set current = page.url or '/' %}
    {% if current == '/' or current == '/index.html' %}
      {% set altUrlRaw = '/ar/' %}
    {% else %}
      {% set altUrlRaw = '/ar' + current %}
    {% endif %}
  {% endif %}

  <header class="site-header">
    <div class="container nav-row">
      <a class="logo" href="{{ (base + '/') | url }}">TM</a>

      {# Always-visible language switch (outside dropdown) #}
      <a class="lang-switch-top" href="{{ altUrlRaw | url }}">{{ l_lang_toggle }}</a>

      <button class="nav-toggle" aria-expanded="false" aria-controls="primary-nav" aria-label="Open menu" aria-haspopup="true">☰</button>

      <nav id="primary-nav" class="nav-links" aria-label="Primary">
        <a href="{{ (base + '/') | url }}">{{ l_home | safe }}</a>
        <a href="{{ (base + '/projects/') | url }}">{{ l_projects | safe }}</a>
        <a href="{{ (base + '/media/') | url }}">{{ l_media | safe }}</a>
        <a href="{{ (base + '/gallery/') | url }}">{{ l_gallery | safe }}</a>
        <a href="{{ (base + '/music/') | url }}">{{ l_music | safe }}</a>
        <a href="{{ (base + '/research/') | url }}">{{ l_research | safe }}</a>
        <a href="{{ (base + '/training-consulting/') | url }}">{{ l_training | safe }}</a>
        {% if (collections.posts and collections.posts | length > 0) or (collections.posts_en and collections.posts_en | length > 0) or (collections.posts_ar and collections.posts_ar | length > 0) %}
          <a href="{{ (base + '/blog/') | url }}">{{ l_blog | safe }}</a>
        {% endif %}
        <a href="{{ (base + '/about/') | url }}">{{ l_about | safe }}</a>
        <a href="{{ (base + '/contact/') | url }}">{{ l_contact | safe }}</a>
        {# removed in-menu lang switch to avoid duplication #}
      </nav>
    </div>
  </header>

  <main id="main-content">
    {{ content | safe }}
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <p class="foot-brand">© {{ (now or date) | date('yyyy') }} Tamer Mansour</p>
      <div class="foot-social">
        <a href="https://www.pinterest.com/TamerCreates/" target="_blank" rel="noopener" aria-label="Pinterest">
          <svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24" fill="#BD081C"><path d="M12 2a10 10 0 0 0-4 19.2c.06-.86.12-2.18.03-3.12l-1.1-4.68s-.28-.58-.28-1.44c0-1.35.78-2.36 1.75-2.36.83 0 1.22.62 1.22 1.36 0 .83-.53 2.07-.8 3.22-.23.97.49 1.76 1.44 1.76 1.72 0 3.04-1.81 3.04-4.42 0-2.31-1.66-3.93-4.04-3.93-2.75 0-4.37 2.06-4.37 4.19 0 .83.32 1.72.73 2.2.08.1.09.2.07.31l-.28 1.13c-.04.17-.14.2-.32.12-1.2-.56-1.95-2.3-1.95-3.71 0-3.01 2.19-5.78 6.31-5.78 3.31 0 5.89 2.36 5.89 5.51 0 3.29-2.07 5.94-4.94 5.94-0.96 0-1.86-.5-2.17-1.08l-.59 2.24c-.21.84-.78 1.9-1.17 2.55A10 10 0 1 0 12 2z"/></svg>
        </a>
        <a href="https://www.tiktok.com/@ai_visionary_tm" target="_blank" rel="noopener" aria-label="TikTok">
          <svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24" fill="#000"><path d="M16.8 3c.43 1.87 1.86 3.37 3.7 3.8v3.34a7.73 7.73 0 0 1-3.7-1.02v5.63c0 3.74-3 6.77-6.7 6.77S3.4 18.49 3.4 14.75s3-6.77 6.7-6.77c.4 0 .8.04 1.17.12v3.46a3.36 3.36 0 0 0-1.17-.21c-1.8 0-3.25 1.48-3.25 3.3s1.45 3.3 3.25 3.3 3.24-1.48 3.24-3.3V3h4.21z"/></svg>
        </a>
        <a href="https://www.youtube.com/@TamerAI-e5i" target="_blank" rel="noopener" aria-label="YouTube">
          <svg aria-hidden="true" width="24" height="24" viewBox="0 0 24 24" fill="#FF0000"><path d="M23 7.5a3.5 3.5 0 0 0-2.46-2.48C18.7 4.5 12 4.5 12 4.5s-6.7 0-8.54.52A3.5 3.5 0 0 0 1 7.5 51.7 51.7 0 0 0 .5 12c0 1.75.28 3.5.46 4.5.34 1.77 1.8 2.46 3 2.6C5.84 19.62 12 19.5 12 19.5s6.7 0 8.54-.52a3.5 3.5 0 0 0 2.46-2.48c.3-1 .5-2.75.5-4.5s-.2-3.5-.5-4.5zM9.75 15.02V8.98L15.5 12l-5.75 3.02z"/></svg>
        </a>
      </div>
    </div>
  </footer>

  <script defer src="{{ '/js/nav.js' | url }}?v={{ site.assetVersion }}"></script>
  <script defer src="{{ '/js/lightbox.js' | url }}{% if site.assetVersion %}?v={{ site.assetVersion }}{% endif %}"></script>
  <script async defer src="https://assets.pinterest.com/js/pinit.js"></script>
  <script>
    // force navigation for the top language switch on some Android browsers
    document.addEventListener('click',function(e){
      var x=e.target.closest('a.lang-switch-top'); if(!x) return;
      var h=x.getAttribute('href'); if(h){ requestAnimationFrame(function(){ window.location.href=h; }); }
    });
  </script>
</body>
</html>
